{"version":3,"sources":["mitragyna.jsx"],"names":["Collection","state","loading","target","prototype","build","bindAll","setTarget","props","nextProps","subject","isRelationship","isA","Associations","CollectionProxy","setLoadedTarget","setState","base","loaded","load","then","isUndefined","all","attributes","cloneTarget","push","newItem","oldItem","replace","item","delete","clone","blankComponent","children","className","component","size","map","t","localId","replaceOnTarget","toArray","PureComponent","propTypes","oneOfType","array","node","string","func","object","isRequired","defaultProps","inlineRows","ErrorsFor","root","context","field","errors","forField","message","code","contextTypes","Field","resource","value","valueFor","nextContext","name","type","uncheckedValue","resourceValue","isNull","val","id","renderCheckboxComponent","renderRadioComponent","renderSelectComponent","renderTextareaComponent","renderInputComponent","componentFor","checkboxProps","omit","keys","finalComponent","createElement","key","onBlur","handleUpdate","onChange","handleChange","checked","inputProps","fieldValue","radioProps","includeBlank","options","optionsLabelKey","selectOptions","empty","o","unshift","omittedKeys","selectProps","textareaProps","e","persist","afterUpdate","newValue","detect","assignAttributes","bool","instanceOf","number","Resource","reflection","reflectionInstance","klass","reflectOnAssociation","inverseReflection","inverseOf","error","newResource","updateRoot","oldTarget","association","newTarget","collection","first","childContext","isNestedResource","onSubmit","preventDefault","componentProps","body","handleSubmit","newRoot","fromSave","save","childContextTypes"],"mappings":"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","file":"mitragyna.min.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport ActiveResource from 'active-resource';\nimport _ from 'underscore';\n\nexport class Collection extends React.PureComponent {\n  static propTypes = {\n    children: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.node,\n    ]),\n    className: PropTypes.string,\n    blankComponent: PropTypes.func,\n    component: PropTypes.func,\n    subject: PropTypes.oneOfType([\n      PropTypes.object,\n      PropTypes.func,\n    ]).isRequired,\n  };\n\n  static defaultProps = {\n    inlineRows: false\n  };\n\n  // link to global state by enabling afterLoad, afterAdd, afterRemove, afterUpdate callbacks that can call\n  // an action linked to dispatch\n\n  constructor() {\n    super();\n\n    this.state = {\n      loading: true,\n      target: ActiveResource.prototype.Collection.build()\n    };\n\n    _.bindAll(this,\n      'buildOnTarget',\n      'cloneTarget',\n      'replaceOnTarget',\n      'removeFromTarget',\n    );\n  }\n\n  componentDidMount() {\n    this.setTarget(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setTarget(nextProps);\n  }\n\n  setTarget(props) {\n    const { subject } = props;\n\n    let isRelationship = subject.isA(ActiveResource.prototype.Associations.prototype.CollectionProxy);\n\n    let setLoadedTarget = (target) => {\n      this.setState({ loading: false, target })\n    };\n\n    if(isRelationship) {\n      if(subject.base.loaded()) {\n        setLoadedTarget(subject.base.target)\n      } else {\n        subject.load()\n        .then(setLoadedTarget)\n      }\n    } else if(!_.isUndefined(subject.all)) {\n      subject.all()\n      .then(setLoadedTarget)\n    }\n  }\n\n  buildOnTarget(attributes) {\n    const { subject } = this.props;\n    let target = this.cloneTarget();\n\n    target.push(subject.build(attributes));\n\n    this.setState({ target: target });\n  }\n\n  replaceOnTarget(newItem, oldItem) {\n    let target = this.cloneTarget();\n\n    target.replace(oldItem, newItem);\n\n    return this.setState({ target });\n  }\n\n  removeFromTarget(item) {\n    let target = this.cloneTarget();\n\n    target.delete(item);\n\n    return this.setState({ target });\n  }\n\n  cloneTarget() {\n    return this.state.target.clone();\n  }\n\n  render() {\n    const { blankComponent, children, className, component } = this.props;\n    const { loading, target } = this.state;\n\n    return (\n      <section className={ className }>\n        { loading ? (\n          <span>Loading</span>\n        ) : (\n          target.size() > 0 ? (\n            target.map((t) =>\n              <Resource subject={ t } key={ t.localId } component= { component }\n                        afterUpdate={ this.replaceOnTarget }>\n                { children }\n              </Resource>\n            ).toArray()\n          ) : (blankComponent != null &&\n            blankComponent()\n          )\n        )}\n      </section>\n    );\n  }\n}\n\nexport class ErrorsFor extends React.PureComponent {\n  static propTypes = {\n    field: PropTypes.string,\n  };\n\n  static contextTypes = {\n    root: PropTypes.object,\n  };\n\n  render() {\n    const { root } = this.context;\n    const { field } = this.props;\n\n    if(_.size(root.errors().forField(field)) < 1) {\n      return null;\n    }\n\n    return(\n      <summary>\n        {\n          _.map(root.errors().forField(field),\n            (message, code) => <p key={ code }>{ message }</p>\n          )\n        }\n      </summary>\n    );\n  }\n};\n\nexport class Field extends React.PureComponent {\n  static contextTypes = {\n    afterUpdate: PropTypes.func,\n    resource: PropTypes.object,\n  };\n\n  static propTypes = {\n    component: PropTypes.func,\n    includeBlank: PropTypes.bool,\n    name: PropTypes.string.isRequired,\n    options: PropTypes.instanceOf(ActiveResource.Collection),\n    optionsLabelKey: PropTypes.string,\n    type: PropTypes.string.isRequired,\n    uncheckedValue: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.string,\n      PropTypes.number,\n    ]),\n    value: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.string,\n      PropTypes.number,\n    ])\n  };\n\n  constructor() {\n    super();\n\n    _.bindAll(this,\n      'handleChange',\n      'handleUpdate',\n      'renderCheckboxComponent',\n      'renderInputComponent',\n      'renderRadioComponent',\n      'renderSelectComponent',\n      'renderTextareaComponent'\n    );\n  }\n\n  componentWillMount() {\n    const { resource } = this.context;\n\n    // Set initial value to that of the resources\n    this.setState({\n      value: this.valueFor(resource, this.props)\n    });\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    const { resource } = nextContext;\n\n    this.setState({\n      value: this.valueFor(resource, nextProps)\n    });\n  }\n\n  // TODO: Add support for non-resource options on select and radio\n  valueFor(resource, props) {\n    const { name, type, uncheckedValue, value } = props;\n\n    switch(type) {\n      case 'checkbox':\n        var resourceValue = resource[name];\n        if(resourceValue == value) {\n          return true;\n        } else if(resourceValue == uncheckedValue || _.isUndefined(resourceValue) || _.isNull(resourceValue)) {\n          return false;\n        } else {\n          throw 'Field ' + name + ' with value ' + resource[name] + ' does not match value or uncheckedValue for checkbox'\n        }\n      case 'radio':\n      case 'select':\n        var val = resource[name]();\n        return _.isNull(val) ? '' : val.id;\n      default:\n        return resource[name] || '';\n    }\n  }\n\n  componentFor(type) {\n    switch(type) {\n      case 'checkbox':\n        return this.renderCheckboxComponent();\n      case 'radio':\n        return this.renderRadioComponent();\n      case 'select':\n        return this.renderSelectComponent();\n      case 'textarea':\n        return this.renderTextareaComponent();\n      default:\n        return this.renderInputComponent();\n    }\n  }\n\n  render() {\n    const { type } = this.props;\n\n    return this.componentFor(type);\n  }\n\n  renderCheckboxComponent() {\n    const { component, name } = this.props;\n\n    let checkboxProps = _.omit(this.props, _.keys(_.omit(Field.propTypes, 'type')));\n\n    let finalComponent = component || 'input';\n    return React.createElement(finalComponent, {\n      ...checkboxProps,\n      key: name,\n      onBlur: this.handleUpdate,\n      onChange: this.handleChange,\n      checked: this.state.value,\n    });\n  }\n\n  renderInputComponent() {\n    const { component, name } = this.props;\n\n    let inputProps = _.omit(this.props, _.keys(_.omit(Field.propTypes, 'type')));\n\n    let finalComponent = component || 'input';\n    return React.createElement(finalComponent, {\n      ...inputProps,\n      key: name,\n      onBlur: this.handleUpdate,\n      onChange: this.handleChange,\n      value: this.state.value,\n    });\n  }\n\n  renderRadioComponent() {\n    const { component, name, value } = this.props;\n    const { value: fieldValue } = this.state;\n\n    if (_.isUndefined(value)) {\n      throw 'Input type=\"radio\" must have prop \"value\"';\n    }\n\n    let radioProps = _.omit(this.props, _.keys(_.omit(Field.propTypes, 'type')));\n\n    let finalComponent = component || 'input';\n    return React.createElement(finalComponent, {\n      ...radioProps,\n      checked: value.id == fieldValue,\n      key: name,\n      onBlur: this.handleUpdate,\n      onChange: this.handleChange,\n      value: value.id,\n    });\n  }\n\n  renderSelectComponent() {\n    const { component, includeBlank, name, options, optionsLabelKey } = this.props;\n\n    let selectOptions = null;\n    if (options.empty()) {\n      throw 'Input type=\"select\" must have options';\n    } else {\n      selectOptions = options.map((o) => <option key={o.localId} value={o.id}>{o[optionsLabelKey]}</option>);\n      if (includeBlank) {\n        selectOptions = selectOptions.unshift(<option key={-1} value=''></option>);\n      }\n    }\n\n    let omittedKeys = component ? _.omit(Field.propTypes, 'type') : Field.propTypes;\n    let selectProps = _.omit(this.props, _.keys(omittedKeys));\n\n    let finalComponent = component || 'select';\n    return React.createElement(finalComponent, {\n      ...selectProps,\n      key: name,\n      onBlur: this.handleUpdate,\n      onChange: this.handleChange,\n      value: this.state.value,\n    }, selectOptions.toArray());\n  }\n\n  renderTextareaComponent() {\n    const { component, name } = this.props;\n\n    let textareaProps = _.omit(this.props, _.keys(_.omit(Field.propTypes, 'type')));\n\n    let finalComponent = component || 'textarea';\n    return React.createElement(finalComponent, {\n      ...textareaProps,\n      key: name,\n      onBlur: this.handleUpdate,\n      onChange: this.handleChange,\n      value: this.state.value,\n    });\n  }\n\n  handleChange(e) {\n    e.persist();\n\n    const { type } = this.props;\n\n    let value;\n\n    switch(type) {\n      case 'checkbox':\n        value = e.target.checked;\n        break;\n      default:\n        value = e.target.value;\n    }\n\n    this.setState({ value });\n  }\n\n  handleUpdate(e) {\n    e.persist();\n\n    const { afterUpdate, resource } = this.context;\n    const { name, type, options, uncheckedValue, value } = this.props;\n\n    var newValue = e.target.value;\n\n    switch(type) {\n      case 'checkbox':\n        if(e.target.checked) {\n          newValue = value;\n        } else {\n          newValue = uncheckedValue;\n        }\n        break;\n      case 'radio':\n        newValue = value;\n        break;\n      case 'select':\n        newValue = options.detect((o) => o.id === newValue);\n        break;\n    }\n\n    afterUpdate(resource.assignAttributes({ [name]: newValue }));\n  }\n}\n\nexport class Resource extends React.PureComponent {\n  static propTypes = {\n    afterUpdate: PropTypes.func,\n    children: PropTypes.oneOfType([\n      PropTypes.array,\n      PropTypes.node,\n    ]),\n    className: PropTypes.string,\n    component: PropTypes.func,\n    componentProps: PropTypes.object,\n    onSubmit: PropTypes.func,\n    reflection: PropTypes.string,\n    subject: PropTypes.object.isRequired,\n  };\n\n  static contextTypes = {\n    isNestedResource: PropTypes.bool,\n    root: PropTypes.object,\n    updateRoot: PropTypes.func,\n  };\n\n  static childContextTypes = {\n    afterUpdate: PropTypes.func,\n    isNestedResource: PropTypes.bool,\n    resource: PropTypes.object,\n    root: PropTypes.object,\n    updateRoot: PropTypes.func,\n  };\n\n  static defaultProps = {\n    componentProps: {}\n  };\n\n  constructor(props, context) {\n    super();\n\n    _.bindAll(this,\n      'afterUpdate',\n      'handleSubmit',\n      'updateRoot'\n    );\n\n    const { root } = context;\n    const { reflection, subject } = props;\n\n    let state = { resource: subject };\n\n    if(reflection) {\n      var reflectionInstance = root.klass().reflectOnAssociation(reflection);\n      if(_.isUndefined(reflectionInstance)) throw 'Reflection ' + reflection + ' not found.';\n      var inverseReflection = reflectionInstance.inverseOf();\n      if(_.isUndefined(inverseReflection)) throw 'Reflection ' + reflection + ' must have inverse.';\n\n      state = {\n        ...state,\n        inverseReflection,\n        reflection: reflectionInstance,\n      };\n    }\n\n    this.state = state;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ resource: nextProps.subject });\n  }\n\n  componentDidCatch(error) {\n    return <p>{ error }</p>;\n  }\n\n  afterUpdate(newResource) {\n    const { root, updateRoot } = this.context;\n    const { inverseReflection, resource } = this.state;\n\n    if(inverseReflection) {\n      var oldTarget = resource.association(inverseReflection.name).target;\n      var newTarget = newResource.association(inverseReflection.name).target;\n\n      if(inverseReflection.collection()) {\n        // FIXME: Allow autosave inverseOf collection to appropriately handle multiple resources in the collection,\n        //   not just the first. If changing multiple fields of resource quickly, root may not be found in oldTarget\n        //   because it has already been replaced by a previous change\n        // var index = oldTarget.indexOf(root);\n        // var newRoot = newTarget.get(index);\n        updateRoot(newTarget.first());\n      } else {\n        updateRoot(newTarget);\n      }\n    } else {\n      this.updateRoot(newResource);\n    }\n  }\n\n  getChildContext() {\n    const { root } = this.context;\n    const { resource } = this.state;\n\n    let childContext = {\n      afterUpdate: this.afterUpdate,\n      isNestedResource: true,\n      root: root || resource,\n      resource,\n      updateRoot: this.updateRoot\n    };\n\n    return childContext;\n  }\n\n  handleSubmit(e) {\n    const { onSubmit } = this.props;\n    const { resource } = this.state;\n\n    if(!_.isUndefined(onSubmit)) {\n      e.preventDefault();\n      onSubmit(resource);\n    }\n  }\n\n  render() {\n    const { isNestedResource } = this.context;\n    const { children, className, component, componentProps } = this.props;\n    const { resource } = this.state;\n\n    let body = null;\n    if(component) {\n      body = React.createElement(component, {\n        ...componentProps,\n        afterUpdate: this.afterUpdate,\n        subject: resource\n      });\n    } else {\n      body = children;\n    }\n\n    if(!isNestedResource) {\n      body = <form onSubmit={ this.handleSubmit }>{ body }</form>;\n    }\n\n    return (\n      <section className={ className }>\n        { body }\n      </section>\n    );\n  }\n\n  updateRoot(newRoot, fromSave = false) {\n    const { afterUpdate } = this.props;\n    const { resource } = this.state;\n\n    this.setState({ resource: newRoot });\n\n    if(!_.isUndefined(afterUpdate)) afterUpdate(newRoot, resource);\n\n    if(!fromSave) {\n      newRoot.save((root) => this.updateRoot(root, true));\n    }\n  }\n}\n"]}